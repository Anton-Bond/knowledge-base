**Рефлексия** в C# — это механизм, который позволяет программе исследовать, модифицировать и динамически взаимодействовать с типами, методами, свойствами и другими метаданными во время выполнения.

Она предоставляет доступ к информации о структуре типов (метаинформации) через пространство имён `System.Reflection`.

---

### Зачем нужна рефлексия?

1. **Изучение типов во время выполнения**:  
    Например, получение списка методов, свойств или событий объекта.
2. **Динамическое создание экземпляров типов**:  
    Используется для вызова конструкторов или создания объектов, даже если их тип известен только во время выполнения.
3. **Вызов методов или установка значений свойств**:  
    Полезно в сценариях, где методы или свойства неизвестны на этапе компиляции.
4. **Анализ атрибутов**:  
    Позволяет считывать кастомные атрибуты, добавленные к классам, методам и другим членам.
5. **Создание и выполнение библиотек или плагинов**:  
    Рефлексия часто используется в системах плагинов для загрузки внешних сборок.

---

### Пример работы с рефлексией:

#### Получение информации о типе:

```csharp
using System;
using System.Reflection;

public class Example
{
    public string Name { get; set; }
    public void SayHello() => Console.WriteLine("Hello!");

    public static void Main()
    {
        Type type = typeof(Example);

        // Вывод имени типа
        Console.WriteLine($"Тип: {type.Name}");

        // Список свойств
        Console.WriteLine("Свойства:");
        foreach (var prop in type.GetProperties())
        {
            Console.WriteLine($"- {prop.Name}");
        }

        // Список методов
        Console.WriteLine("Методы:");
        foreach (var method in type.GetMethods())
        {
            Console.WriteLine($"- {method.Name}");
        }
    }
}
```

---

#### Создание экземпляра и вызов метода через рефлексию:

```csharp
public class Example
{
    public void Greet(string message) => Console.WriteLine(message);
}

public class Program
{
    public static void Main()
    {
        // Получение типа
        Type type = typeof(Example);

        // Создание экземпляра
        object instance = Activator.CreateInstance(type);

        // Вызов метода
        MethodInfo method = type.GetMethod("Greet");
        method.Invoke(instance, new object[] { "Hello, Reflection!" });
    }
}
```

---

### Основные классы и методы рефлексии:

- **`Type`**: предоставляет доступ к информации о типах.
- **`MethodInfo`**: информация о методах.
- **`PropertyInfo`**: информация о свойствах.
- **`FieldInfo`**: информация о полях.
- **`ConstructorInfo`**: информация о конструкторах.
- **`Assembly`**: работа с целыми сборками.

---

### Преимущества:

1. Гибкость: позволяет писать код, который адаптируется к изменяющимся требованиям.
2. Расширяемость: динамическое создание плагинов, сканирование атрибутов, вызов методов.
3. Удобство: автоматизация задач, связанных с метаданными.

---

### Недостатки:

1. **Снижение производительности**:  
    Рефлексия медленнее, чем прямой вызов методов или доступ к свойствам.
2. **Сложность в отладке**:  
    Ошибки могут быть обнаружены только во время выполнения.
3. **Потеря безопасности типов**:  
    Рефлексия игнорирует проверку типов на этапе компиляции.

---

### Когда использовать рефлексию?

- Когда необходимо анализировать или модифицировать типы и их поведение во время выполнения.
- Для разработки динамических приложений, таких как ORM, Dependency Injection или системы плагинов.


var method = obj.GetType().GetMethod("MethodName");

method.Invoke(obj, null);